CREATE DATABASE IF NOT EXISTS penjualan_apriori;
USE penjualan_apriori;

-- 1. Tabel Barang
CREATE TABLE barang (
  id_barang INT AUTO_INCREMENT PRIMARY KEY,
  nama_barang VARCHAR(100) NOT NULL,
  kategori VARCHAR(50),
  harga DECIMAL(10,2)
);

-- 2. Tabel Transaksi
CREATE TABLE transaksi (
     INT AUTO_INCREMENT PRIMARY KEY,
  tanggal_transaksi DATE NOT NULL
);

-- 3. Tabel Detail Transaksi
CREATE TABLE detail_transaksi (
  id_detail INT AUTO_INCREMENT PRIMARY KEY,
  id_transaksi INT NOT NULL,
  id_barang INT NOT NULL,
  qty INT DEFAULT 1,
  total_harga DECIMAL(10,2),
  FOREIGN KEY (id_transaksi) REFERENCES transaksi(id_transaksi),
  FOREIGN KEY (id_barang) REFERENCES barang(id_barang)
);


INSERT INTO BARANG (NAMA_BARANG, KATEGORI, HARGA) VALUES
('SCREAMOUS REVERSIBEL JACKET - JACKET ARILE BLACK-GREY', 'JACKET', 196500.00),
('SCREAMOUS WINDBREAKER - JACKET RAMIRES BLACK', 'JACKET', 212500.00),
('SCREAMOUS JACKET ELORA BLACK - WATER-REPELLENT', 'JACKET', 202500.00),
('SCREAMOUS BOMBER CANVAS JACKET - JACKET STENCIL BLACK', 'JACKET', 217500.00),
('SCREAMOUS ANORAK JACKET RAVEN BLACK', 'JACKET', 212500.00),
('SCREAMOUS JACKET VARSITY - JACKET FOOJIE NAVY BLUE', 'JACKET', 212500.00),
('SCREAMOUS OVERSHIRT JACKET - JACKET SYLVESTRE BLACK', 'JACKET', 212500.00),
('SCREAMOUS WINDBREAKER - JACKET TRAILS NAVY BLUE', 'JACKET', 212500.00),
('SCREAMOUS CELANA LONG PANTS - LONG PANTS NETROS BLACK', 'PANTS', 149000.00),
('SCREAMOUS LONG PANTS VINCENT BROWN - CELANA PANJANG PRIA', 'PANTS', 202500.00),
('SCREAMOUS LONG CARGO PANTS RELAXED - LONG PANTS BOLEYN BLACK', 'PANTS', 189000.00),
('SCREAMOUS CELANA - SWEAT PANTS ZENNIE MISTY', 'PANTS', 149000.00),
('SCREAMOUS LONG PANTS - CHINO PANTS PHOTEX CAMEL BROWN', 'PANTS', 190000.00),
('SCREAMOUS LONG PANTS JOGGER - LONG PANTS CARLO BLACK', 'PANTS', 115000.00),
('SCREAMOUS LONG PANTS - FATIGUE PANTS DAVE NAVY BLUE', 'PANTS', 202500.00),
('SCREAMOUS TRACK PANTS PARACHUTE - LONG PANTS THIMO ON BLACK', 'PANTS', 149000.00),
('SCREAMOUS BACKPACK ALE BLACK - TAS RANSEL PRIA 25L', 'BAG', 120000.00),
('SCREAMOUS BAGPACK - BACKPACK COREY NAVY BLUE', 'BAG', 139000.00),
('SCREAMOUS TAS FITNESS GYM - TRAVEL BAG SOILE CREAM', 'BAG', 125000.00),
('SCREAMOUS TAS BACKPACK - BACKPACK DIMES BLACK', 'BAG', 130000.00),
('SCREAMOUS TAS TOTE BAG UNISEX BLACK DENGAN KOMPARTEMEN LAPTOP', 'BAG', 159000.00),
('SCREAMOUS SLIPPERS SANDAL - SANDAL CORGAN BLACK', 'SANDAL', 110000.00),
('SCREAMOUS HAT - POLOCAP MAZAL BLACK', 'HAT', 89000.00),
('SCREAMOUS GAMESOME HAT - HAT GRAND GLIDE BROKEN WHITE BLUE', 'HAT', 105000.00),
('SCREAMOUS HAT SNAPBACK SADE BLACK CORDUROY PRIA', 'HAT', 110000.00),
('SCREAMOUS WALLET AQUINO BROWN KULIT SINTETIS PRIA', 'WALLET', 85000.00),
('SCREAMOUS SHORTSLEEVE SHIRT - SHIRT CARLOS BLACK', 'SHIRT', 145000.00),
('SCREAMOUS LONGSLEEVE SHIRT - SHIRT ANTOLIN OFF WHITE', 'SHIRT', 145000.00),
('SCREAMOUS LONGSLEEVE SHIRT - SHIRT REECE BLACK', 'SHIRT', 145000.00),
('SCREAMOUS FLANNEL - KEMEJA PRIA BLACK-CREAM', 'SHIRT', 155000.00);
-- 1) 50 Transaksi (dua per hari, 2025-07-01 s.d. 2025-07-25)
INSERT INTO transaksi (tanggal_transaksi) VALUES
('2025-07-01'), ('2025-07-01'),
('2025-07-02'), ('2025-07-02'),
('2025-07-03'), ('2025-07-03'),
('2025-07-04'), ('2025-07-04'),
('2025-07-05'), ('2025-07-05'),
('2025-07-06'), ('2025-07-06'),
('2025-07-07'), ('2025-07-07'),
('2025-07-08'), ('2025-07-08'),
('2025-07-09'), ('2025-07-09'),
('2025-07-10'), ('2025-07-10'),
('2025-07-11'), ('2025-07-11'),
('2025-07-12'), ('2025-07-12'),
('2025-07-13'), ('2025-07-13'),
('2025-07-14'), ('2025-07-14'),
('2025-07-15'), ('2025-07-15'),
('2025-07-16'), ('2025-07-16'),
('2025-07-17'), ('2025-07-17'),
('2025-07-18'), ('2025-07-18'),
('2025-07-19'), ('2025-07-19'),
('2025-07-20'), ('2025-07-20'),
('2025-07-21'), ('2025-07-21'),
('2025-07-22'), ('2025-07-22'),
('2025-07-23'), ('2025-07-23'),
('2025-07-24'), ('2025-07-24'),
('2025-07-25'), ('2025-07-25');

-- 2) Detail Transaksi
-- Transaksi 1–10: selalu berisi id_barang 1 & 2 (pair {1,2}, support=10)
INSERT INTO detail_transaksi (id_transaksi, id_barang, qty, total_harga) VALUES
(1,  1, 1, 196500.00),(1,  2, 1, 212500.00),
(2,  1, 1, 196500.00),(2,  2, 1, 212500.00),
(3,  1, 1, 196500.00),(3,  2, 1, 212500.00),
(4,  1, 1, 196500.00),(4,  2, 1, 212500.00),
(5,  1, 1, 196500.00),(5,  2, 1, 212500.00),
(6,  1, 1, 196500.00),(6,  2, 1, 212500.00),
(7,  1, 1, 196500.00),(7,  2, 1, 212500.00),
(8,  1, 1, 196500.00),(8,  2, 1, 212500.00),
(9,  1, 1, 196500.00),(9,  2, 1, 212500.00),
(10, 1, 1, 196500.00),(10, 2, 1, 212500.00);

-- Transaksi 11–20: selalu berisi id_barang 1 & 3 (pair {1,3}, support=10)
INSERT INTO detail_transaksi (id_transaksi, id_barang, qty, total_harga) VALUES
(11, 1, 1, 196500.00),(11, 3, 1, 202500.00),
(12, 1, 1, 196500.00),(12, 3, 1, 202500.00),
(13, 1, 1, 196500.00),(13, 3, 1, 202500.00),
(14, 1, 1, 196500.00),(14, 3, 1, 202500.00),
(15, 1, 1, 196500.00),(15, 3, 1, 202500.00),
(16, 1, 1, 196500.00),(16, 3, 1, 202500.00),
(17, 1, 1, 196500.00),(17, 3, 1, 202500.00),
(18, 1, 1, 196500.00),(18, 3, 1, 202500.00),
(19, 1, 1, 196500.00),(19, 3, 1, 202500.00),
(20, 1, 1, 196500.00),(20, 3, 1, 202500.00);

-- Transaksi 21–30: selalu berisi id_barang 9 & 12 (pair {9,12}, support=10)
INSERT INTO detail_transaksi (id_transaksi, id_barang, qty, total_harga) VALUES
(21, 9, 1, 149000.00),(21,12,1,149000.00),
(22, 9, 1, 149000.00),(22,12,1,149000.00),
(23, 9, 1, 149000.00),(23,12,1,149000.00),
(24, 9, 1, 149000.00),(24,12,1,149000.00),
(25, 9, 1, 149000.00),(25,12,1,149000.00),
(26, 9, 1, 149000.00),(26,12,1,149000.00),
(27, 9, 1, 149000.00),(27,12,1,149000.00),
(28, 9, 1, 149000.00),(28,12,1,149000.00),
(29, 9, 1, 149000.00),(29,12,1,149000.00),
(30, 9, 1, 149000.00),(30,12,1,149000.00);

-- Transaksi 31–40: selalu berisi id_barang 17 & 18 (pair {17,18}, support=10)
INSERT INTO detail_transaksi (id_transaksi, id_barang, qty, total_harga) VALUES
(31,17,1,120000.00),(31,18,1,139000.00),
(32,17,1,120000.00),(32,18,1,139000.00),
(33,17,1,120000.00),(33,18,1,139000.00),
(34,17,1,120000.00),(34,18,1,139000.00),
(35,17,1,120000.00),(35,18,1,139000.00),
(36,17,1,120000.00),(36,18,1,139000.00),
(37,17,1,120000.00),(37,18,1,139000.00),
(38,17,1,120000.00),(38,18,1,139000.00),
(39,17,1,120000.00),(39,18,1,139000.00),
(40,17,1,120000.00),(40,18,1,139000.00);

-- Transaksi 41–50: pasangan unik (hindari pembentukan itemset kuat baru)
INSERT INTO detail_transaksi (id_transaksi, id_barang, qty, total_harga) VALUES
(41, 4,1,217500.00),(41, 5,1,212500.00),
(42, 4,1,217500.00),(42, 6,1,212500.00),
(43, 4,1,217500.00),(43, 7,1,212500.00),
(44, 4,1,217500.00),(44, 8,1,212500.00),
(45, 5,1,212500.00),(45, 6,1,212500.00),
(46, 5,1,212500.00),(46, 7,1,212500.00),
(47, 5,1,212500.00),(47, 8,1,212500.00),
(48, 6,1,212500.00),(48, 7,1,212500.00),
(49, 6,1,212500.00),(49, 8,1,212500.00),
(50, 7,1,212500.00),(50, 8,1,212500.00);


-- Tambahkan di bagian akhir db.sql
USE penjualan_apriori;

CREATE TABLE IF NOT EXISTS proses_apriori (
  id_proses INT AUTO_INCREMENT PRIMARY KEY,
  tanggal_proses TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  tanggal_awal DATE NOT NULL,
  tanggal_akhir DATE NOT NULL,
  min_support DECIMAL(5,2) NOT NULL,
  min_confidence DECIMAL(5,2) NOT NULL,
  total_transaksi INT NOT NULL,
  total_aturan_signifikan INT NOT NULL,
  aturan_signifikan JSON NOT NULL
);